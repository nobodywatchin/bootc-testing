---
modules:
  - type: containerfile
    snippets:
      - RUN rm -f /usr/share/flatpak/remotes.d/*.flatpakrepo || true
      - RUN rm -f /etc/flatpak/remotes.d/*.flatpakrepo || true
  - type: default-flatpaks
    configurations:
      - scope: user
        notify: true
        repo:
          url: https://dl.flathub.org/repo/flathub.flatpakrepo
          name: flathub
          title: Flathub (user)
      - scope: system
        notify: true
        repo:
          url: https://dl.flathub.org/repo/flathub.flatpakrepo
          name: org-system
          title: Flathub (system, managed)
        install:
          - com.github.marhkb.Pods
          - io.github.dvlv.boxbuddyrs
          - com.github.tchx84.Flatseal
          - io.github.giantpinkrobots.flatsweep
          - it.mijorus.gearlever
          - com.usebottles.bottles
          - net.nokyan.Resources
          - com.mattjakeman.ExtensionManager
          - org.gnome.Decibels
          - org.gnome.Showtime
          - org.gnome.FileRoller
  - type: files
    files:
      - source: flatpak
        destination: /
- type: systemd
    system:
      enabled:
        - flatpak-hide-org-system.service
