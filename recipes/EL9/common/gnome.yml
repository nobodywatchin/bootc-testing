---
modules:
  - type: dnf # Installs Core Groups for GUI
    repos:
      cleanup: true 
      copr:
        - trixieua/morewaita-icon-theme
    remove:
      packages:
        - vim-minimal
    group-install:
      packages: 
      - Workstation product core
    install:
      install-weak-deps: false
      packages:
        - morewaita-icon-theme
        # Replaces vim-minimal
        - vim-enhanced 

        # --- Audio / Multimedia (PipeWire-first)
        - pipewire
        - pipewire-alsa
        - pipewire-pulseaudio
        - pipewire-jack-audio-connection-kit
        - pipewire-utils
        - wireplumber
        - gstreamer1-plugins-base
        - gstreamer1-plugins-good
        - gstreamer1-plugins-bad-free
        - gstreamer1-plugins-bad-free-libs
        - alsa-ucm
        - alsa-utils
        - pavucontrol

        # --- Fonts (curated)
        - dejavu-sans-fonts
        - dejavu-sans-mono-fonts
        - dejavu-serif-fonts
        # (emoji is already in Workstation product core)
        - google-noto-sans-arabic-fonts
        - google-noto-sans-hebrew-fonts
        - google-noto-sans-devanagari-fonts
        - google-noto-cjk-fonts-common
        - google-noto-fonts-common

        # --- Guest/VM agents
        - qemu-guest-agent
        - spice-vdagent
        - open-vm-tools-desktop
        - hyperv-daemons

        # --- Printing & Scanning
        - cups
        - cups-pk-helper
        - cups-filters
        - ghostscript
        - gutenprint
        - gutenprint-cups
        - system-config-printer-udev
        - hplip
        - libsane-hpaio
        - sane-backends-drivers-scanners
        - sane-airscan   # from EPEL

        # --- Networking
        - NetworkManager-wifi
        - NetworkManager-bluetooth
        - NetworkManager-wwan
        - NetworkManager-adsl
        - NetworkManager-openvpn
        - NetworkManager-openconnect
        - dnsmasq        # keep disabled unless you need the system daemon
        - nftables
        - ModemManager
        - ppp

        # --- Bluetooth stack
        - bluez
        # - bluez-tools   # optional: scriptable CLI helpers

        # --- GVFS (files/SMB/phones)
        - gvfs-fuse
        - gvfs-goa
        - gvfs-gphoto2
        - gvfs-mtp
        - gvfs-smb

        # --- Hardware / firmware / power / TB
        - fwupd
        - bolt
        - switcheroo-control

        # --- Camera
        - libcamera
        - libcamera-gstreamer
        - libcamera-tools

        # --- Desktop niceties
        - wl-clipboard
        # (plymouth comes from the group already)
        - plymouth-system-theme
        - flatpak

        # --- Systemd extras
        - systemd-oomd
        - systemd-container
        
        # --- GNOME Packages
        - gnome-color-manager
        - gnome-disk-utility
        - gnome-terminal
        - gnome-terminal-nautilus
        - nautilus
        - orca
        - xdg-user-dirs-gtk
        - colord
        - gdm
        - gnome-shell
        - gnome-control-center
        - gnome-settings-daemon
        - gnome-session
        - gnome-initial-setup
        - gnome-remote-desktop
        - xdg-desktop-portal
        - xdg-desktop-portal-gnome

  - type: gnome-extensions # Installs extensions for GNOME Desktop
    install:
      - 3843 # Just Perfection
      - 615 # AppIndicator and KStatusNotifierItem Support
      # - 3088 # Extension List
      - 7 # Removable Drive Menu
      - 3193 # Blur my Shell
      - 19 # User Themes
      - 779 # Clipboard Indicator
      - 1460 # Vitals
      - 1401 # Bluetooth Quick Connect
  - type: files # Adds to the dconf db (Custom settings for GNOME, Extensions, Themes, and App Folders)
    files:
      - source: gnome 
        destination: /
      - source: justfiles/desktop 
        destination: /
  - type: bling # Updates dconf on boot (GNOME Extensions Settings, Themes, App Folders)
    install:
      - dconf-update-service 