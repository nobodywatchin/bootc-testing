modules:
  - type: dnf
    repos:
      cleanup: true 
      copr:
        - jreilly1821/c10s-gnome
    remove:
      packages:
        - vim-minimal
    group-install:
      packages:
        - Workstation product core
    install:
      install-weak-deps: false
      packages:
        # Replaces vim-minimal
        - vim-enhanced 
        
        # --- Audio / Multimedia (PipeWire-first)
        - pipewire
        - pipewire-alsa
        - pipewire-pulseaudio
        - pipewire-jack-audio-connection-kit
        - pipewire-utils
        - wireplumber
        - gstreamer1-plugins-base
        - gstreamer1-plugins-good
        - gstreamer1-plugins-bad-free
        - gstreamer1-plugins-bad-free-libs
        - alsa-ucm
        - alsa-utils
        - pavucontrol

        # --- Fonts (curated)
        - dejavu-sans-fonts
        - dejavu-sans-mono-fonts
        - dejavu-serif-fonts
        - jetbrains-mono-fonts-all
        # (emoji is already in Workstation product core)
        - google-noto-sans-arabic-fonts
        - google-noto-sans-hebrew-fonts
        - google-noto-sans-devanagari-fonts
        - google-noto-sans-cjk-fonts

        # --- Guest/VM agents
        - qemu-guest-agent
        - spice-vdagent
        - open-vm-tools-desktop
        - hyperv-daemons

        # --- Printing & Scanning
        - cups
        - cups-pk-helper
        - cups-filters
        - ghostscript
        - gutenprint
        - gutenprint-cups
        - system-config-printer-udev
        - hplip
        - libsane-hpaio
        - sane-backends-drivers-scanners
        - sane-airscan   # from EPEL

        # --- Networking
        - NetworkManager-wifi
        - NetworkManager-bluetooth
        - NetworkManager-wwan
        - NetworkManager-adsl
        - NetworkManager-openvpn
        - NetworkManager-openconnect
        - dnsmasq        # keep disabled unless you need the system daemon
        - nftables
        - ModemManager
        - ppp

        # Wireless (Bluetooth/Wifi)
        - bluez # Bluetooth dependency
        - bluez-cups
        # - bluez-tools   # optional: scriptable CLI helpers
        - hidapi
        - brcmfmac-firmware
        - atheros-firmware
        - tiwilink-firmware
        - realtek-firmware
        - nxpwireless-firmware
        - mt7xxx-firmware
        - iwlwifi-dvm-firmware
        - iwlwifi-mvm-firmware
        - iwlegacy-firmware
        - libertas-firmware

        # --- GVFS (files/SMB/phones)
        - gvfs-fuse
        - gvfs-goa
        - gvfs-gphoto2
        - gvfs-mtp
        - gvfs-smb

        # --- Hardware / firmware / power / TB
        - fwupd
        - bolt
        - switcheroo-control

        # --- Camera
        - libcamera
        - libcamera-v4l2
        - libcamera-gstreamer
        - libcamera-tools

        # --- Desktop niceties
        - wl-clipboard
        # (plymouth comes from the group already)
        - plymouth-system-theme
        - flatpak

        # --- Systemd extras
        - systemd-oomd
        - systemd-container
        
        # --- GNOME Packages (not in COPR)
        - gnome-color-manager
        - gnome-disk-utility
        - ptyxis
        - nautilus
        - orca
        - xdg-user-dirs-gtk
        - colord
        # --- GNOME Packages (to be replaced)
        - gdm
        - gnome-shell
        - gnome-control-center
        - gnome-settings-daemon
        - gnome-session
        - gnome-initial-setup
        - gnome-remote-desktop
        - xdg-desktop-portal
        - xdg-desktop-portal-gnome
        - tuned-ppd
        
        # GNOME 48 COPR REPLACEMENT PACKAGES
    replace:
    - from-repo: copr:copr.fedorainfracloud.org:jreilly1821:c10s-gnome
      packages:
        - glib2
        - gdm
        - gnome-shell
        - gnome-control-center
        - gnome-settings-daemon
        - gnome-session
        - gnome-initial-setup
        - gnome-remote-desktop
        - xdg-desktop-portal
        - xdg-desktop-portal-gnome

  - type: gnome-extensions # Installs extensions for GNOME Desktop
    install:
      - 3843 # Just Perfection
      - 615 # AppIndicator and KStatusNotifierItem Support
      - 517 # Caffeine
      - 7 # Removable Drive Menu
      - 6139 # Tailscale QS
      - 3193 # Blur my Shell
      - 7065 # Tiling Shell
      - 7535 # Accent Icons
      - 19 # User Themes
      - 779 # Clipboard Indicator
      - 1460 # Vitals
      - 6580 # Open Bar
      - 1401 # Bluetooth Quick Connect
      - 6051 # DuckduckGo Web search
  
  - type: files # Adds polkit and dconf rules (Custom settings for GNOME, Extensions, Themes, and App Folders)
    files:
      - source: gnome 
        destination: /
      - source: justfiles/desktop 
        destination: /
  
  - type: bling # Updates dconf on boot (GNOME Extensions Settings, Themes, App Folders)
    install:
      - dconf-update-service 
  
  - type: kargs # Kernel Arguments for Desktop
    kargs:
      - mem_sleep_default=s2idle # Wakes up faster (For Laptops)
      - amdgpu.si_support=1 # Enables AMDGPU on Southern Islands GPUs
      - amdgpu.cik_support=1 # Enables AMDGPU on Sea Islands GPUs
      - radeon.si_support=0 # Disables Radeon on Southern Islands GPUs
      - radeon.cik_support=0 # Disables Radeon on Sea Islands GPUs
      - modprobe.blacklist=radeon # Blacklists Radeon drivers altogether