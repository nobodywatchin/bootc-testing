modules:
  # 1) Enable RPM Fusion (EL10)
  - type: dnf
    repos:
      keys:
        - https://download1.rpmfusion.org/free/el/RPM-GPG-KEY-rpmfusion-free-el-10
        - https://download1.rpmfusion.org/nonfree/el/RPM-GPG-KEY-rpmfusion-nonfree-el-10
    install:
      packages:
        - https://mirrors.rpmfusion.org/free/el/rpmfusion-free-release-10.noarch.rpm
        - https://mirrors.rpmfusion.org/nonfree/el/rpmfusion-nonfree-release-10.noarch.rpm


  # 2) Install akmod-wl + build deps (no weak deps)
  - type: dnf
    install:
      install-weak-deps: false
      packages:
        - akmods
        - akmod-wl
        - broadcom-wl            # provides modprobe.d blacklists for b43/bcma/brcmsmac
        - kernel-devel
        - kernel-headers
        - gcc
        - make
        - binutils
        - elfutils-libelf-devel
        - bc
        - patch
        - iw
        - wpa_supplicant  # handy on minimal images
        - rfkill
        - mokutil                 # optional: for Secure Boot MOK enrollment